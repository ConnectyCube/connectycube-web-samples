<div class="chat__left-panel">
  <div class="user-profile">
    <div class="user-profile__info">
      <div class="user-profile__avatar">
        <p>{{avatar}}</p>
      </div>
      <p class="user-profile__fullname">{{fullName}}</p>
    </div>
    <button (click)="moreHandler()" type="button" class="user-profile__setting-btn">
      <mat-icon>{{moreIcon}}</mat-icon>
    </button>
    <div [ngClass]="moreIcon==='expand_less'?'active':''" class="more">
      <ul class="more-list">
        <li (click)="logout()" class="more-list__item">
          <mat-icon>logout</mat-icon>
          Logout
        </li>
        <li class="more-list__item">
          <mat-icon>settings</mat-icon>
          Settings
        </li>
      </ul>
    </div>
  </div>
  <div class="dialog">
    <form action="#" class="dialog__search">
      <mat-icon class="search__icon">search</mat-icon>
      <input type="text" placeholder="Search">
      <button
        matTooltip="Add dialog"
        matTooltipPosition="above"
        matTooltipShowDelay="500"
        matTooltipClass="tooltip"
        type="button" class="dialog__add" (click)="addDialogEvent($event)">
        <mat-icon class="add__icon">person_add</mat-icon>
      </button>
    </form>

    <ul class="dialog__list">
      <cdk-virtual-scroll-viewport
        #viewport
        itemSize="73"
      >
        <li *cdkVirtualFor="let dialog of (dialogs$ | async)" class="dialog__list-item">
          <a [routerLink]="dialog.id" (click)="dialogHandler($event)">
            <div *ngIf="dialog.unreadMessage !== 0" class="item-badge">{{dialog.unreadMessage}}</div>
            <div class="item-avatar"
                 [ngStyle]="{'background-image': dialog.photo?'url('+ dialog.photo +')':'none',
                 'background-color': dialog.photo?'':'skyblue'}">
              <p *ngIf="!dialog.photo">{{dialog.name.slice(0, 2).toUpperCase()}}</p>
            </div>
            <div class="item-info">
              <h4 class="item-name">{{dialog.name}}</h4>
              <small class="item-last-message">{{dialog.lastMessage || "No messages yet"}}</small>
              <small class="item-time">{{getDateMessages(dialog.lastMessageDate, dialog.createAt)}}</small>
            </div>
          </a>
        </li>
      </cdk-virtual-scroll-viewport>
    </ul>
  </div>
</div>
